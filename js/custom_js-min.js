var offset=0,timeout=150;function checkforDoubleHeader(){$(".header-image--on").length>1&&$(".header-image").slice(1).removeClass("header-image--on"),$(".header-image:not(.header-image--on)").length>1&&$(".header-image").slice(1).addClass("header-image--on")}function switchHeader(e){var a=document.createElement("a");if(null!=$(".header-image.header-image--on").css("background-image")){a.href=$(".header-image.header-image--on").css("background-image").match(/url\([\'\"]*(.*?)[\'\"]*\)/)[1];var t=a.pathname}else t=$(".page__content").attr("data-image");if("default"==e)var o=$(".page__content").attr("data-image");else if(e.hasAttribute("data-image"))o=e.getAttribute("data-image");$(window).width()<1024&&(o=o.replace(".","_wide.")),o!==t&&(t=o,$(".header-image:not(.header-image--on)").css("background-image","url("+t+")"),$(".header-image:not(.header-image--on)").addClass("header-image--switch"),checkforDoubleHeader(),$(".header-image--switch").imagesLoaded({background:!0},(function(){$(".header-image--on").removeClass("header-image--on"),$(".header-image--switch").addClass("header-image--on"),$(".header-image--switch").removeClass("header-image--switch"),checkforDoubleHeader()})))}function isinview(){var e=$(window).height(),a=.2*e,t=.3*e;$(".header-switch-onscroll").each((function(){var e=$(this).offset().top-$(window).scrollTop();e>a&&e<t&&switchHeader(this)}))}$(document).ready((function(){isinview(),$(window).on("scroll",(function(){$.throttle(1e3,isinview())}))})),window.addEventListener("click",e=>{const a=Array.from(document.querySelectorAll('[data-toggle="collapse"]')),t=Array.from(document.querySelectorAll('[data-toggle="showall"], [data-toggle="hideall"]')),o=e.target;if(a.includes(o)){const e=o.getAttribute("data-target"),a=(o.getAttribute("data-parent"),document.querySelector(o.getAttribute("data-parent")));if(a)for(var l=a.getElementsByClassName("collapse"),i=0;i<l.length;i++){var s="#"+l[i].id;collapse(s,"hide")}collapse(e,"toggle"),o.classList.contains("minus")?setTimeout((function(){o.classList.remove("minus")}),timeout):o.classList.add("minus")}if(t.includes(o)){$(window).scrollTop(),$(window).height();if(offset=$(".hackmenu").offset().top-$(window).scrollTop(),"showall"==o.getAttribute("data-toggle"))collapse(".collapse.editedbooks, .collapse.articles, .collapse.shortarticles, .collapse.talks, .collapse.abstract, .collapse.fullentry, .collapse.project, .collapse.post, .collapse.item_details, .collapse.grad, .collapse.undergrad","show"),o.setAttribute("data-toggle","hideall");else{const e=o.getAttribute("data-target");collapse(e,"hide"),collapse(".collapse.project","hide"),o.setAttribute("data-toggle","showall"),o.set}setTimeout((function(){window.scrollTo(0,0);var e=$(".hackmenu").offset().top;window.scrollBy(0,e-offset)}),300)}},!1);const fnmap={toggle:"toggle",show:"add",hide:"remove"},collapse=(e,a)=>{Array.from(document.querySelectorAll(e)).forEach(e=>{e.classList[fnmap[a]]("show"),isinview()})};