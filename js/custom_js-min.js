var offset=0,timeout=150;function checkforDoubleHeader(){$(".header-image--on").length>1&&$(".header-image").slice(1).removeClass("header-image--on"),$(".header-image:not(.header-image--on)").length>1&&$(".header-image").slice(1).addClass("header-image--on")}function switchHeader(e){var a=document.createElement("a");if(null!=$(".header-image.header-image--on").css("background-image")){a.href=$(".header-image.header-image--on").css("background-image").match(/url\([\'\"]*(.*?)[\'\"]*\)/)[1];var o=a.pathname}else o=$(".page__content").attr("data-image");if("default"==e)var t=$(".page__content").attr("data-image");else if(e.hasAttribute("data-image"))t=e.getAttribute("data-image");$(window).width()<1024&&(t=t.replace(".","_wide.")),t!==o&&(o=t,$(".header-image:not(.header-image--on)").css("background-image","url("+o+")"),$(".header-image:not(.header-image--on)").addClass("header-image--switch"),checkforDoubleHeader(),$(".header-image--switch").imagesLoaded({background:!0},(function(){$(".header-image--on").removeClass("header-image--on"),$(".header-image--switch").addClass("header-image--on"),$(".header-image--switch").removeClass("header-image--switch"),checkforDoubleHeader()})))}function isinview(){var e=$(window).height(),a=.2*e,o=.3*e;$(".header-switch-onscroll").each((function(){var e=$(this).offset().top-$(window).scrollTop();e>a&&e<o&&switchHeader(this)}))}$(document).ready((function(){isinview(),$(window).on("scroll",(function(){$.throttle(1e3,isinview())}))})),window.addEventListener("click",e=>{const a=Array.from(document.querySelectorAll('[data-toggle="collapse"]')),o=Array.from(document.querySelectorAll('[data-toggle="showall"], [data-toggle="hideall"]')),t=e.target;if(a.includes(t)){const e=t.getAttribute("data-target"),a=t.getAttribute("data-parent");console.log("selector",e),console.log("parentSelector:",a);const o=document.querySelector(t.getAttribute("data-parent"));console.log("parent:",o);var l=o.getElementsByClassName("collapse");console.log("childDivs:",l);for(var i=0;i<l.length;i++){console.log("childDivs[i].id",l[i].id);var r="#"+l[i].id;console.log("childSelector",r),collapse(r,"hide")}console.log("past for loop"),collapse(e,"toggle")}if(o.includes(t)){$(window).scrollTop(),$(window).height();if(offset=$(".hackmenu").offset().top-$(window).scrollTop(),"showall"==t.getAttribute("data-toggle"))collapse(".collapse.editedbooks, .collapse.articles, .collapse.shortarticles, .collapse.talks, .collapse.abstract, .collapse.fullentry, .collapse.project, .collapse.post, .collapse.item_details, .collapse.grad, .collapse.undergrad","show"),t.setAttribute("data-toggle","hideall");else{const e=t.getAttribute("data-target");collapse(e,"hide"),collapse(".collapse.project","hide"),t.setAttribute("data-toggle","showall"),t.set}setTimeout((function(){window.scrollTo(0,0);var e=$(".hackmenu").offset().top;window.scrollBy(0,e-offset)}),300)}},!1);const fnmap={toggle:"toggle",show:"add",hide:"remove"},collapse=(e,a)=>{Array.from(document.querySelectorAll(e)).forEach(e=>{e.classList[fnmap[a]]("show"),isinview()})};