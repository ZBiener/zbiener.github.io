<!doctype html>

<html class="no-js" lang="en">

<head>


	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

	Zvi Biener

	Journal Theme by https://jekyllthemes.io
	Premium + free Jekyll themes for your blog or website.

	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/favicon.png">
	<link data-rh="true" rel="alternate" type="application/rss+xml" title="RSS" href="https://zbiener.github.io/feed.xml"/>
	<title>Using Home Assistant to Automate Vacuuming – Zvi Biener</title>
	<meta name="description" content="Home Assistant is an open source home automation platform that puts local control and privacy first. It can be controlled through a browser or though android and iOS apps. I have mine running on a Raspberry Pi.  I use Home Assistant to...">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Using Home Assistant to Automate Vacuuming – Zvi Biener">
	<meta name="twitter:description" content="Home Assistant is an open source home automation platform that puts local control and privacy first. It can be controlled through a browser or though android and iOS apps. I have mine running on a Raspberry Pi.  I use Home Assistant to...">
	<meta name="twitter:image:src" content="https://zbiener.github.io/images/broom1.jpg">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="Using Home Assistant to Automate Vacuuming – Zvi Biener" />
	<meta property="og:description" content="Home Assistant is an open source home automation platform that puts local control and privacy first. It can be controlled through a browser or though android and iOS apps. I have mine running on a Raspberry Pi.  I use Home Assistant to..." />
	<meta property="og:image" content="https://zbiener.github.io/images/broom1.jpg" />

	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">
	
	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-56661953-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-56661953-1');
</script>

	

	
	<!-- Extra Header JS Code -->
	
	

	
	
</head>


<body class="loading" data-site-url="https://zbiener.github.io" data-page-url="/blog/robot-vacuums">


	<header class="header">
	<style>
		@media only screen and (max-width: 1024px) {
			.header-image {
			background-image: url(/images/broom1_wide.jpg);
			};
		}
		
		@media only screen and (min-width: 1024px) {
  			.header-image {
			background-image: url(/images/broom1.jpg);
			}
		}
		
	</style>
	<div class="header-image header-image--on"></div>

	<div class="header-image"></div>

	<div class="header-overlay"></div>

	
	<div class="header__content">

		
		<a href="/" class="header__title">
			Zvi Biener
		</a>
		
		

		<p class="header__tagline"></p>

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/projects/" class="menu__list__item__link">Research</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/publications/" class="menu__list__item__link">Publications</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/teaching/" class="menu__list__item__link">Teaching</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/blog/" class="menu__list__item__link">Tech</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/cv/" class="menu__list__item__link">CV</a>
					</li>
					
				</ul>
				<ul class="socials">

   	

	
	<li class="socials__item">
		<a href="mailto:zvi.biener@uc.edu" target="_blank" class="socials__item__link" title="">
			<i class="fa fa-envelope" aria-hidden="true"></i>
		</a>
	</li>
	

	
	<li class="socials__item">
		<a href="http://orcid.org/0000-0002-3863-205X" target="_blank" class="socials__item__link" title="">
			<i class="ai ai-orcid" aria-hidden="true"></i>
		</a>
	</li>
	

	
	<li class="socials__item">
		<a href="https://philpeople.org/profiles/zvi-biener/" target="_blank" class="socials__item__link" title="">
			<i class="ai ai-philpapers ai-1x" aria-hidden="true"></i>
		</a>
	</li>
	

	

   	

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/zbiener" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

	
	<li class="socials__item">
		<a href="https://zbiener.github.io/feed.xml" target="_blank" class="socials__item__link" title="https://zbiener.github.io/feed.xml">
			<i class="fas fa-rss" aria-hidden="true"></i>
		</a>
	</li>
	


</ul>
			</div>
		</div>

	</div>

</header>


	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg></div>

	<div class="page-loader"></div>

	
	<div class="page">

		<div class="page__content" data-page-title="Using Home Assistant to Automate Vacuuming – Zvi Biener" data-image="/images/broom1.jpg">

			<section class="intro">
	<div class="wrap">
	</div>
</section>




<section class="single">

	<div class="wrap">

		<h2>Using Home Assistant to Automate Vacuuming</h2>
		<p class="date">12/05/2019&nbsp;
		
		<a class="tag" href="/blog/home-assistant/">home assistant</a>
		</p>


		<p><a href="https://www.home-assistant.io/">Home Assistant</a> is an open source home automation platform that puts local control and privacy first. It can be controlled through a browser, or though android and iOS apps. It can run on a variety of PCs - I have mine running on a Raspberry Pi. I’ve posted my configuration files - just keep reading.</p>

<p>I use Home Assistant to:</p>

<ul>
  <li>Control 2 Xiaomi Robot Vacuums.</li>
  <li>Interact with a 1st gen Simplisafe alarm system to keep track of open doors, windows, and motion.</li>
  <li>Open/Close my garage door remotely.</li>
  <li>Keep track of a few Tile trackers.</li>
  <li>Keep track of phone locations, so it can execute various tasks when everyone leaves the house.</li>
  <li>Use motion control as a DYI alarm system.</li>
</ul>

<p>The GUI for the entire set-up looks like this (without any tiles):</p>

<p><img src="/images/vacuum0.jpg" alt="Home Assistant GUI" />{ width=80% }</p>

<p>I may compose detailed installation guides in the future, but there are many already available. The installation is not for the faint-at-heart, but it is getting easier everyday. The overall list of tasks for a proper install is long. You need to:</p>

<ul>
  <li>Construct a Raspberry Pi</li>
  <li>Flash a drive with Hass.io</li>
  <li>(Optional) prepare a isolated segment of your network for automation devices. (I have two linked routers, one that manages devices with personal information, and the other manages automation devices).</li>
  <li>(Optional) Define proper routing in your network to reach the Raspberry Pi from the internet. Without this, you can’t control devices remotely, and what’s the fun in that?</li>
  <li>Make sure access to the RPi is secure using an SSH key.</li>
  <li>Install appropriate modules on Hass.io. I have Duck-DNS and SSH server modules for the remote access to work, and Samba module for local file access, an MQTT broker for communication between devices, and an RTL_433 to MQTT bridge to translate radio signals to digital ones (since my old alarm uses radio signals).</li>
</ul>

<p>This is the basic setup. Now you need to define entities and actions for Home Assistant to manage, as well as a GUI of your choosing. So… instead of full-blown tutorials, I wanted to post my configuration files.</p>

<p>I’ll focus on the vacuums for now. Most of the underlying configuration is found <a href="https://github.com/ZBiener/home-assistant.config/blob/master/packages/vacuum.yaml">here</a>. Like all Home Assistant config files, it is a YAML file that defines sensors, input variables, scripts, and automations. Basically, it creates a list of rooms given a coordinate system, and a list of conditions under which the vacuums run. In total, the system:</p>

<ul>
  <li>lets me send a vacuum to any given room using the GUI</li>
  <li>will run the vacuums when the house is empty, but only once in a 36 hours period.</li>
  <li>will run the vacuums at specified times if the house hasn’t been empty for 36 hours.</li>
  <li>Send the vacuums to wait by after every 3 runs (for emptying).</li>
</ul>

<p>The config is easy to follow, if you’ve dug into Home Assistant a bit. At the very least, it can give you ideas for how to construct similar scripts. Since Home Assistant recently allows for natural language processing, you can probably replicate these without mucking with YAML.</p>

<p>From the UI, the functionality looks like this:</p>

<p><img src="/images/vacuum1.jpg" alt="Vacuum GUI1" width="65%" /></p>

<p><img src="/images/vacuum2.jpg" alt="Vacuum GUI2" width="65%" /></p>

<p><img src="/images/vacuum3.jpg" alt="Vacuum GUI3" width="65%" /></p>

<p>Full details on vacuum properties are provided directly by Home Assistant and look like this:</p>

<p><img src="/images/vacuum4.jpg" alt="Vacuum GUI4" width="65%" /></p>



	</div>

</section>

<section class="single">
	<div class="wrap">
	
		<br>
		<h3>Comments</h3>
		<div class="disqus-block">
	  	<div id="disqus_thread">
    <script>
    var disqus_shortname = 'zbiener';
    var disqus_config = function () {
        this.page.url = "https://zbiener.github.io/blog/robot-vacuums";  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = "/blog/robot-vacuums"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };

    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
	  	</div>
	
</section>

		</div>

	</div>


	<footer class="footer page_content">

	<div class="footer__copyright">
		<span>© 2023 Zvi Biener<br>Made with plain text using<br><a href="https://jekyllrb.com/" target="_blank">Jekyll</a>, <a href="https://github.com/inukshuk/jekyll-scholar" target="_blank">Jekyll Scholar</a>, and <a href="https://github.com/ruby/rake" target="_blank">Rake</a><br></span>
		
	</div>

</footer>


	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/journal-min.js"></script>
	<script src="/js/custom_js-min.js"></script>

	

	


</body>

</html>